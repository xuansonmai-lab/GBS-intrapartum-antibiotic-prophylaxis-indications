<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng c·ª• quy·∫øt ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .intro-section {
            background: linear-gradient(135deg, #f8f9fa, #e3f2fd);
            padding: 25px 30px;
            border-bottom: 3px solid #e0e0e0;
        }

        .intro-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
            font-weight: 600;
        }

        .intro-section p {
            color: #495057;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .intro-section ul {
            color: #495057;
            padding-left: 20px;
            line-height: 1.6;
        }

        .intro-section li {
            margin-bottom: 8px;
        }

        .form-section {
            padding: 30px;
        }

        .question-group {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .question-group:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .question-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .radio-option:hover {
            background: #e3f2fd;
        }

        .radio-option input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }

        .radio-option input[type="radio"]:checked + label {
            color: #2196f3;
            font-weight: 600;
        }

        .hidden {
            display: none;
        }

        .result-section {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 10px;
            border: 2px solid #dee2e6;
        }

        .clinical-summary {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .clinical-summary h3 {
            color: #856404;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .clinical-summary p {
            color: #856404;
            line-height: 1.5;
            font-size: 1.05em;
        }

        .recommendation {
            padding: 20px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            text-align: center;
            margin-top: 15px;
        }

        .recommend-yes {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .recommend-no {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .recommend-wait {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }

        .rationale {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
        }

        .rationale h4 {
            color: #17a2b8;
            margin-bottom: 8px;
        }

        .rationale p {
            color: #495057;
            line-height: 1.4;
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        @media (max-width: 768px) {
            .radio-group {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .form-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî¨ C√¥ng c·ª• quy·∫øt ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS</h1>
            <p>H·ªó tr·ª£ quy·∫øt ƒë·ªãnh l√¢m s√†ng d·ª±a tr√™n h∆∞·ªõng d·∫´n th·ª±c h√†nh</p>
        </div>

        <div class="intro-section">
            <h2>üìñ Gi·ªõi thi·ªáu v·ªÅ c√¥ng c·ª•</h2>
            <p>
                C√¥ng c·ª• n√†y ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ h·ªó tr·ª£ c√°c b√°c sƒ© s·∫£n khoa trong vi·ªác ƒë∆∞a ra quy·∫øt ƒë·ªãnh ch√≠nh x√°c v·ªÅ 
                ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS (Group B Streptococcus) d·ª±a tr√™n c√°c ti√™u ch√≠ l√¢m s√†ng c·∫≠p nh·∫≠t.
            </p>
            <p><strong>T√≠nh nƒÉng ch√≠nh:</strong></p>
            <ul>
                <li>ƒê√°nh gi√° to√†n di·ªán c√°c y·∫øu t·ªë nguy c∆°</li>
                <li>Logic quy·∫øt ƒë·ªãnh d·ª±a tr√™n h∆∞·ªõng d·∫´n th·ª±c h√†nh hi·ªán t·∫°i</li>
                <li>T√≥m t·∫Øt l√¢m s√†ng t·ª± ƒë·ªông v√† khuy·∫øn c√°o r√µ r√†ng</li>
                <li>Gi·∫£i th√≠ch c∆° s·ªü khoa h·ªçc cho m·ªói quy·∫øt ƒë·ªãnh</li>
                <li>Giao di·ªán th√¢n thi·ªán, d·ªÖ s·ª≠ d·ª•ng trong th·ª±c h√†nh</li>
            </ul>
        </div>

        <div class="form-section">
            <form id="gbsForm">
                <!-- T√¨nh tr·∫°ng ·ªëi -->
                <div class="question-group">
                    <div class="question-label">T√¨nh tr·∫°ng ·ªëi:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="membrane_intact" name="membrane_status" value="intact">
                            <label for="membrane_intact">·ªêi c√≤n</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="membrane_ruptured" name="membrane_status" value="ruptured">
                            <label for="membrane_ruptured">ƒê√£ v·ª° ·ªëi</label>
                        </div>
                    </div>
                </div>

                <!-- Th·ªùi gian v·ª° ·ªëi -->
                <div class="question-group hidden" id="rupture_time_group">
                    <div class="question-label">Th·ªùi gian v·ª° ·ªëi:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="rupture_lt18h" name="rupture_time" value="<18h">
                            <label for="rupture_lt18h">< 18 gi·ªù</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="rupture_gte18h" name="rupture_time" value="‚â•18h">
                            <label for="rupture_gte18h">‚â• 18 gi·ªù</label>
                        </div>
                    </div>
                </div>

                <!-- T√¨nh tr·∫°ng chuy·ªÉn d·∫° -->
                <div class="question-group">
                    <div class="question-label">T√¨nh tr·∫°ng chuy·ªÉn d·∫° hi·ªán t·∫°i:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="no_labor" name="labor_status" value="no">
                            <label for="no_labor">Ch∆∞a chuy·ªÉn d·∫°</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="active_labor" name="labor_status" value="active">
                            <label for="active_labor">ƒêang chuy·ªÉn d·∫° th·∫≠t s·ª±</label>
                        </div>
                    </div>
                </div>

                <!-- Tu·ªïi thai -->
                <div class="question-group">
                    <div class="question-label">Tu·ªïi thai:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="preterm" name="gestational_age" value="<37weeks">
                            <label for="preterm">< 37 tu·∫ßn (thai non th√°ng)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="term" name="gestational_age" value="‚â•37weeks">
                            <label for="term">‚â• 37 tu·∫ßn (ƒë·ªß th√°ng)</label>
                        </div>
                    </div>
                </div>

                <!-- S·ªët s·∫£n ph·ª• -->
                <div class="question-group">
                    <div class="question-label">S·ªët s·∫£n ph·ª• (‚â• 38¬∞C):</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="fever_yes" name="fever" value="yes">
                            <label for="fever_yes">C√≥</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="fever_no" name="fever" value="no">
                            <label for="fever_no">Kh√¥ng</label>
                        </div>
                    </div>
                </div>

                <!-- Ti·ªÅn s·ª≠ b√© s∆° sinh nhi·ªÖm tr√πng GBS -->
                <div class="question-group">
                    <div class="question-label">Ti·ªÅn s·ª≠ thai k·ª≥ tr∆∞·ªõc c√≥ b√© s∆° sinh nhi·ªÖm tr√πng do GBS:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="previous_gbs_yes" name="previous_gbs_infection" value="yes">
                            <label for="previous_gbs_yes">C√≥</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="previous_gbs_no" name="previous_gbs_infection" value="no">
                            <label for="previous_gbs_no">Kh√¥ng</label>
                        </div>
                    </div>
                </div>

                <!-- Ti·ªÅn s·ª≠ khu·∫©n ni·ªáu GBS -->
                <div class="question-group">
                    <div class="question-label">Trong thai k·ª≥ n√†y c√≥ khu·∫©n ni·ªáu do GBS:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="bacteriuria_yes" name="gbs_bacteriuria" value="yes">
                            <label for="bacteriuria_yes">C√≥</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bacteriuria_no" name="gbs_bacteriuria" value="no">
                            <label for="bacteriuria_no">Kh√¥ng</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="bacteriuria_unknown" name="gbs_bacteriuria" value="unknown">
                            <label for="bacteriuria_unknown">Kh√¥ng r√µ</label>
                        </div>
                    </div>
                </div>

                <!-- Lo·∫°i x√©t nghi·ªám GBS -->
                <div class="question-group" id="gbs_test_group">
                    <div class="question-label">X√©t nghi·ªám GBS ƒë√£ th·ª±c hi·ªán:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="culture_test" name="gbs_test_type" value="culture">
                            <label for="culture_test">C·∫•y GBS</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pcr_test" name="gbs_test_type" value="pcr">
                            <label for="pcr_test">PCR GBS</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="no_test" name="gbs_test_type" value="none">
                            <label for="no_test">Kh√¥ng l√†m</label>
                        </div>
                    </div>
                </div>

                <!-- Th·ªùi gian c·∫•y GBS -->
                <div class="question-group hidden" id="culture_timing_group">
                    <div class="question-label">K·∫øt qu·∫£ c·∫•y GBS th·ª±c hi·ªán trong v√≤ng 5 tu·∫ßn:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="culture_within5w" name="culture_timing" value="within5weeks">
                            <label for="culture_within5w">C√≥ (< 5 tu·∫ßn)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="culture_over5w" name="culture_timing" value="over5weeks">
                            <label for="culture_over5w">Kh√¥ng (> 5 tu·∫ßn)</label>
                        </div>
                    </div>
                </div>

                <!-- K·∫øt qu·∫£ c·∫•y/PCR -->
                <div class="question-group hidden" id="test_result_group">
                    <div class="question-label">K·∫øt qu·∫£ x√©t nghi·ªám GBS:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="result_positive" name="gbs_result" value="positive">
                            <label for="result_positive">D∆∞∆°ng t√≠nh</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="result_negative" name="gbs_result" value="negative">
                            <label for="result_negative">√Çm t√≠nh</label>
                        </div>
                    </div>
                </div>

                <!-- Th·ªùi ƒëi·ªÉm PCR -->
                <div class="question-group hidden" id="pcr_timing_group">
                    <div class="question-label">Th·ªùi ƒëi·ªÉm l√†m PCR GBS:</div>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="pcr_during_labor" name="pcr_timing" value="during_labor">
                            <label for="pcr_during_labor">Trong chuy·ªÉn d·∫° ho·∫∑c khi v·ª° ·ªëi</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="pcr_before_labor" name="pcr_timing" value="before_labor">
                            <label for="pcr_before_labor">Tr∆∞·ªõc chuy·ªÉn d·∫°</label>
                        </div>
                    </div>
                </div>

                <!-- K·∫øt qu·∫£ v√† khuy·∫øn c√°o -->
                <div id="result" class="result-section hidden">
                    <div class="clinical-summary">
                        <h3>üìã T√≥m t·∫Øt l√¢m s√†ng:</h3>
                        <p id="clinical_summary_text"></p>
                    </div>
                    
                    <div id="recommendation" class="recommendation"></div>
                    
                    <div class="rationale">
                        <h4>üîç C∆° s·ªü khuy·∫øn c√°o:</h4>
                        <p id="rationale_text"></p>
                    </div>
                </div>

                <button type="button" class="reset-btn" onclick="resetForm()">üîÑ L√†m l·∫°i</button>
            </form>
        </div>

        <!-- Ph·∫ßn t√†i li·ªáu tham kh·∫£o -->
        <div class="references-section">
            <h3>üìö T√†i li·ªáu tham kh·∫£o</h3>
            
            <div class="reference-image">
                <img src="https://via.placeholder.com/600x400/e3f2fd/2c3e50?text=GBS+Prevention+Algorithm" 
                     alt="S∆° ƒë·ªì thu·∫≠t to√°n ph√≤ng ng·ª´a GBS" />
                <p style="font-style: italic; color: #666; margin-top: 10px;">
                    H√¨nh 1: S∆° ƒë·ªì thu·∫≠t to√°n quy·∫øt ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS
                </p>
            </div>

            <div class="reference-text">
                <p><strong>T√†i li·ªáu tham kh·∫£o ch√≠nh:</strong></p>
                <p>
                    1. American College of Obstetricians and Gynecologists. Prevention of Group B Streptococcal 
                    Early-Onset Disease in Newborns: ACOG Committee Opinion, Number 797. Obstet Gynecol. 2020;135(2):e51-e72.
                </p>
                <p>
                    2. Centers for Disease Control and Prevention. Prevention of Perinatal Group B Streptococcal Disease: 
                    Revised Guidelines from CDC, 2010. MMWR Recomm Rep. 2010;59(RR-10):1-36.
                </p>
                <p>
                    3. Verani JR, McGee L, Schrag SJ. Prevention of perinatal group B streptococcal disease--revised 
                    guidelines from CDC, 2010. MMWR Recomm Rep. 2010;59(RR-10):1-36.
                </p>
                <p>
                    <strong>L∆∞u √Ω:</strong> C√¥ng c·ª• n√†y ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o h·ªó tr·ª£. Quy·∫øt ƒë·ªãnh cu·ªëi c√πng 
                    lu√¥n thu·ªôc v·ªÅ b√°c sƒ© ƒëi·ªÅu tr·ªã d·ª±a tr√™n ƒë√°nh gi√° l√¢m s√†ng c·ª• th·ªÉ c·ªßa t·ª´ng tr∆∞·ªùng h·ª£p.
                </p>
            </div>
        </div>

        <!-- Footer b·∫£n quy·ªÅn -->
        <div class="footer">
            <p><strong>üè• C√¥ng c·ª• h·ªó tr·ª£ quy·∫øt ƒë·ªãnh l√¢m s√†ng GBS</strong></p>
            <p>Ph√°t tri·ªÉn nh·∫±m n√¢ng cao ch·∫•t l∆∞·ª£ng chƒÉm s√≥c s·∫£n khoa</p>
            <div class="copyright">
                <p>¬© 2025 - B·∫£n quy·ªÅn thu·ªôc v·ªÅ [T√™n c·ªßa b·∫°n]. M·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
                <p>Email: [your.email@domain.com] | Phi√™n b·∫£n: 1.0</p>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('gbsForm');
        const resultDiv = document.getElementById('result');
        
        // L·∫Øng nghe thay ƒë·ªïi form
        form.addEventListener('change', function() {
            handleFormChange();
            evaluateCase();
        });

        function handleFormChange() {
            const membraneStatus = document.querySelector('input[name="membrane_status"]:checked')?.value;
            const laborStatus = document.querySelector('input[name="labor_status"]:checked')?.value;
            const testType = document.querySelector('input[name="gbs_test_type"]:checked')?.value;
            const pcrResult = document.querySelector('input[name="gbs_result"]:checked')?.value;

            // Hi·ªÉn th·ªã/·∫©n th·ªùi gian v·ª° ·ªëi
            const ruptureTimeGroup = document.getElementById('rupture_time_group');
            if (membraneStatus === 'ruptured') {
                ruptureTimeGroup.classList.remove('hidden');
            } else {
                ruptureTimeGroup.classList.add('hidden');
            }

            // Hi·ªÉn th·ªã/·∫©n nh√≥m x√©t nghi·ªám GBS n·∫øu ch∆∞a chuy·ªÉn d·∫° v√† ·ªëi c√≤n
            const gbsTestGroup = document.getElementById('gbs_test_group');
            if (laborStatus === 'no' && membraneStatus === 'intact') {
                gbsTestGroup.classList.add('hidden');
            } else {
                gbsTestGroup.classList.remove('hidden');
            }

            // Hi·ªÉn th·ªã/·∫©n th·ªùi gian c·∫•y
            const cultureTimingGroup = document.getElementById('culture_timing_group');
            if (testType === 'culture') {
                cultureTimingGroup.classList.remove('hidden');
            } else {
                cultureTimingGroup.classList.add('hidden');
            }

            // Hi·ªÉn th·ªã/·∫©n k·∫øt qu·∫£ x√©t nghi·ªám
            const testResultGroup = document.getElementById('test_result_group');
            if (testType === 'culture' || testType === 'pcr') {
                testResultGroup.classList.remove('hidden');
            } else {
                testResultGroup.classList.add('hidden');
            }

            // Hi·ªÉn th·ªã/·∫©n th·ªùi ƒëi·ªÉm PCR
            const pcrTimingGroup = document.getElementById('pcr_timing_group');
            if (testType === 'pcr' && pcrResult === 'positive') {
                pcrTimingGroup.classList.remove('hidden');
            } else {
                pcrTimingGroup.classList.add('hidden');
            }
        }

        function evaluateCase() {
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);

            // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
            if (!data.membrane_status || !data.labor_status || !data.gestational_age || 
                !data.fever || !data.previous_gbs_infection || !data.gbs_bacteriuria) {
                resultDiv.classList.add('hidden');
                return;
            }

            // T·∫°o t√≥m t·∫Øt l√¢m s√†ng
            let summary = generateClinicalSummary(data);
            document.getElementById('clinical_summary_text').textContent = summary;

            // ƒê√°nh gi√° v√† ƒë∆∞a ra khuy·∫øn c√°o
            let recommendation = evaluateGBSProphylaxis(data);
            displayRecommendation(recommendation);

            resultDiv.classList.remove('hidden');
        }

        function generateClinicalSummary(data) {
            let parts = [];

            // Ti·ªÅn s·ª≠
            if (data.previous_gbs_infection === 'yes') {
                parts.push('c√≥ ti·ªÅn s·ª≠ b√© s∆° sinh nhi·ªÖm tr√πng GBS');
            } else {
                parts.push('ti·ªÅn s·ª≠ kh√¥ng c√≥ b√© s∆° sinh nhi·ªÖm tr√πng GBS');
            }

            if (data.gbs_bacteriuria === 'yes') {
                parts.push('c√≥ khu·∫©n ni·ªáu GBS trong thai k·ª≥');
            }

            // Tu·ªïi thai
            if (data.gestational_age === '<37weeks') {
                parts.push('thai non th√°ng');
            } else {
                parts.push('thai ƒë·ªß th√°ng');
            }

            // T√¨nh tr·∫°ng ·ªëi
            if (data.membrane_status === 'intact') {
                parts.push('·ªëi c√≤n');
            } else {
                if (data.rupture_time === '<18h') {
                    parts.push('v·ª° ·ªëi < 18 gi·ªù');
                } else {
                    parts.push('v·ª° ·ªëi ‚â• 18 gi·ªù');
                }
            }

            // Chuy·ªÉn d·∫°
            if (data.labor_status === 'active') {
                parts.push('ƒëang chuy·ªÉn d·∫° th·∫≠t s·ª±');
            } else {
                parts.push('ch∆∞a chuy·ªÉn d·∫°');
            }

            // S·ªët
            if (data.fever === 'yes') {
                parts.push('c√≥ s·ªët ‚â• 38¬∞C');
            }

            // X√©t nghi·ªám GBS
            if (data.gbs_test_type === 'culture') {
                if (data.culture_timing === 'within5weeks') {
                    parts.push(`c·∫•y GBS trong 5 tu·∫ßn: ${data.gbs_result === 'positive' ? 'd∆∞∆°ng t√≠nh' : '√¢m t√≠nh'}`);
                } else {
                    parts.push('c·∫•y GBS > 5 tu·∫ßn (kh√¥ng c√≤n gi√° tr·ªã)');
                }
            } else if (data.gbs_test_type === 'pcr') {
                if (data.gbs_result === 'positive') {
                    parts.push(`PCR GBS ${data.pcr_timing === 'during_labor' ? 'trong chuy·ªÉn d·∫°' : 'tr∆∞·ªõc chuy·ªÉn d·∫°'}: d∆∞∆°ng t√≠nh`);
                } else {
                    parts.push('PCR GBS √¢m t√≠nh');
                }
            } else {
                parts.push('kh√¥ng l√†m x√©t nghi·ªám GBS');
            }

            return parts.join(', ') + '.';
        }

        function evaluateGBSProphylaxis(data) {
            // 1. C√°c ch·ªâ ƒë·ªãnh tuy·ªát ƒë·ªëi
            if (data.previous_gbs_infection === 'yes') {
                return {
                    decision: 'yes',
                    rationale: 'Ti·ªÅn s·ª≠ c√≥ b√© s∆° sinh nhi·ªÖm tr√πng GBS l√† ch·ªâ ƒë·ªãnh tuy·ªát ƒë·ªëi cho kh√°ng sinh d·ª± ph√≤ng.'
                };
            }

            if (data.gbs_bacteriuria === 'yes') {
                return {
                    decision: 'yes',
                    rationale: 'Khu·∫©n ni·ªáu GBS trong thai k·ª≥ l√† ch·ªâ ƒë·ªãnh tuy·ªát ƒë·ªëi cho kh√°ng sinh d·ª± ph√≤ng.'
                };
            }

            // 2. S·ªët trong chuy·ªÉn d·∫° ho·∫∑c khi v·ª° ·ªëi ‚Üí X·ª≠ tr√≠ nhi·ªÖm tr√πng ·ªëi
            if (data.fever === 'yes' && (data.labor_status === 'active' || data.membrane_status === 'ruptured')) {
                return {
                    decision: 'chorioamnionitis',
                    rationale: 'C√≥ s·ªët trong chuy·ªÉn d·∫° ho·∫∑c khi v·ª° ·ªëi ‚Üí Nghi ng·ªù nhi·ªÖm tr√πng ·ªëi ‚Üí X·ª≠ tr√≠ theo ph√°c ƒë·ªì nhi·ªÖm tr√πng ·ªëi (kh√¥ng ch·ªâ ri√™ng GBS).'
                };
            }

            // 3. Ch∆∞a chuy·ªÉn d·∫° v√† ·ªëi c√≤n
            if (data.labor_status === 'no' && data.membrane_status === 'intact') {
                return {
                    decision: 'wait',
                    rationale: 'Ch∆∞a c√≥ ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng. Theo d√µi v√† t√°i ƒë√°nh gi√° khi c√≥ chuy·ªÉn d·∫° ho·∫∑c v·ª° ·ªëi.'
                };
            }

            // 4. ƒê√°nh gi√° d·ª±a tr√™n c·∫•y GBS
            if (data.gbs_test_type === 'culture') {
                if (data.culture_timing === 'within5weeks') {
                    if (data.gbs_result === 'positive') {
                        // C·∫•y GBS d∆∞∆°ng t√≠nh trong 5 tu·∫ßn ‚Üí Lu√¥n ch·ªâ ƒë·ªãnh kh√°ng sinh
                        return {
                            decision: 'yes',
                            rationale: 'C·∫•y GBS d∆∞∆°ng t√≠nh trong 5 tu·∫ßn ‚Üí Lu√¥n ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS.'
                        };
                    } else if (data.gbs_result === 'negative') {
                        // C·∫•y GBS √¢m t√≠nh trong 5 tu·∫ßn ‚Üí Kh√¥ng ch·ªâ ƒë·ªãnh kh√°ng sinh d√π c√≥ y·∫øu t·ªë kh√°c
                        return {
                            decision: 'no',
                            rationale: 'C·∫•y GBS √¢m t√≠nh trong 5 tu·∫ßn ‚Üí Kh√¥ng ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS (d√π c√≥ PCR d∆∞∆°ng ho·∫∑c v·ª° ·ªëi k√©o d√†i).'
                        };
                    }
                } else {
                    // C·∫•y GBS > 5 tu·∫ßn ‚Üí Xem nh∆∞ ch∆∞a r√µ
                    return evaluateWithoutValidGBSCulture(data);
                }
            } else {
                // Kh√¥ng c·∫•y GBS ho·∫∑c ch·ªâ c√≥ PCR
                return evaluateWithoutValidGBSCulture(data);
            }

            return {
                decision: 'no',
                rationale: 'Kh√¥ng c√≥ ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS theo c√°c ti√™u ch√≠ hi·ªán t·∫°i.'
            };
        }

        function evaluateWithoutValidGBSCulture(data) {
            // Kh√¥ng c√≥ c·∫•y GBS h·ª£p l·ªá (kh√¥ng c·∫•y, c·∫•y >5 tu·∫ßn, ho·∫∑c ch·ªâ c√≥ PCR)
            
            // Thai non th√°ng + v·ª° ·ªëi
            if (data.gestational_age === '<37weeks' && data.membrane_status === 'ruptured') {
                return {
                    decision: 'yes',
                    rationale: 'Thai non th√°ng + v·ª° ·ªëi m√† kh√¥ng c√≥ c·∫•y GBS √¢m t√≠nh ‚Üí Ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS.'
                };
            }

            // Thai ƒë·ªß th√°ng
            if (data.gestational_age === '‚â•37weeks') {
                // C√≥ PCR trong chuy·ªÉn d·∫°
                if (data.gbs_test_type === 'pcr' && data.pcr_timing === 'during_labor') {
                    if (data.gbs_result === 'positive') {
                        return {
                            decision: 'yes',
                            rationale: 'Thai ƒë·ªß th√°ng + PCR GBS d∆∞∆°ng t√≠nh trong chuy·ªÉn d·∫° ‚Üí Ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS.'
                        };
                    } else if (data.gbs_result === 'negative') {
                        return {
                            decision: 'no',
                            rationale: 'PCR GBS √¢m t√≠nh trong chuy·ªÉn d·∫° ‚Üí Kh√¥ng ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS.'
                        };
                    }
                }
                
                // PCR tr∆∞·ªõc chuy·ªÉn d·∫° kh√¥ng c√≥ gi√° tr·ªã
                if (data.gbs_test_type === 'pcr' && data.pcr_timing === 'before_labor') {
                    // Xem nh∆∞ ch∆∞a l√†m PCR
                    if (data.labor_status === 'active' || data.membrane_status === 'ruptured') {
                        return {
                            decision: 'yes',
                            rationale: 'PCR tr∆∞·ªõc chuy·ªÉn d·∫° kh√¥ng c√≥ gi√° tr·ªã ‚Üí Xem nh∆∞ ch∆∞a l√†m ‚Üí C√≥ chuy·ªÉn d·∫°/v·ª° ·ªëi ‚Üí Ch·ªâ ƒë·ªãnh kh√°ng sinh.'
                        };
                    }
                }
                
                // Kh√¥ng l√†m PCR ho·∫∑c PCR kh√¥ng c√≥ gi√° tr·ªã
                if (data.gbs_test_type === 'none' || 
                    (data.gbs_test_type === 'pcr' && data.pcr_timing === 'before_labor')) {
                    if (data.labor_status === 'active' || data.membrane_status === 'ruptured') {
                        return {
                            decision: 'yes',
                            rationale: 'Thai ƒë·ªß th√°ng + v·ª° ·ªëi ho·∫∑c chuy·ªÉn d·∫° m√† kh√¥ng c√≥ x√©t nghi·ªám GBS h·ª£p l·ªá ‚Üí Ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng.'
                        };
                    }
                }
            }

            return {
                decision: 'no',
                rationale: 'Kh√¥ng c√≥ y·∫øu t·ªë nguy c∆° ƒë·ªß m·∫°nh ƒë·ªÉ ch·ªâ ƒë·ªãnh kh√°ng sinh d·ª± ph√≤ng GBS.'
            };
        }

        function displayRecommendation(recommendation) {
            const recommendationDiv = document.getElementById('recommendation');
            const rationaleDiv = document.getElementById('rationale_text');

            if (recommendation.decision === 'yes') {
                recommendationDiv.className = 'recommendation recommend-yes';
                recommendationDiv.innerHTML = '‚úÖ <strong>KHUY·∫æN C√ÅO: CHO KH√ÅNG SINH D·ª∞ PH√íNG GBS</strong>';
            } else if (recommendation.decision === 'chorioamnionitis') {
                recommendationDiv.className = 'recommendation recommend-yes';
                recommendationDiv.innerHTML = 'üî• <strong>X·ª¨ TR√ç NHI·ªÑM TR√ôNG ·ªêI - KH√ÅNG SINH THEO PH√ÅC ƒê·ªí</strong>';
            } else if (recommendation.decision === 'wait') {
                recommendationDiv.className = 'recommendation recommend-wait';
                recommendationDiv.innerHTML = '‚è≥ <strong>CH∆ØA C√ì CH·ªà ƒê·ªäNH - THEO D√ïI</strong>';
            } else {
                recommendationDiv.className = 'recommendation recommend-no';
                recommendationDiv.innerHTML = '‚ùå <strong>KH√îNG C·∫¶N KH√ÅNG SINH D·ª∞ PH√íNG GBS</strong>';
            }

            rationaleDiv.textContent = recommendation.rationale;
        }

        function resetForm() {
            form.reset();
            resultDiv.classList.add('hidden');
            
            // ·∫®n t·∫•t c·∫£ c√°c nh√≥m c√¢u h·ªèi ƒëi·ªÅu ki·ªán
            document.querySelectorAll('.question-group').forEach(group => {
                if (group.id === 'rupture_time_group' || 
                    group.id === 'culture_timing_group' || 
                    group.id === 'test_result_group' || 
                    group.id === 'pcr_timing_group') {
                    group.classList.add('hidden');
                }
            });
            
            // Hi·ªán l·∫°i nh√≥m x√©t nghi·ªám GBS
            document.getElementById('gbs_test_group').classList.remove('hidden');
        }

        // Kh·ªüi t·∫°o form
        window.addEventListener('DOMContentLoaded', function() {
            resetForm();
        });
    </script>
</body>
</html>